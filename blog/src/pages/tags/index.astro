---
import BaseLayout from '../../layouts/BaseLayout.astro';
import { getCollection } from "astro:content";

const allPosts = await getCollection("blog");
const tags = [...new Set(allPosts.map((post: any) => post.data.tags).flat())];
const pageTitle = "Tag Index";
---

<BaseLayout pageTitle={pageTitle}>
  
  <div class="mb-8">
    <h1 class="text-4xl font-bold text-navy mb-6 dark:text-white">
      {pageTitle}
    </h1>
  </div>

  <div class="flex flex-wrap gap-4">

    {tags.map((tag) => (

      <p class="border border-dotted border-gray-400 rounded-lg px-4 py-2 text-lg bg-[#F8FCFD] dark:bg-gray-800 dark:border-gray-600">
        <a class="text-[#00539F] no-underline hover:text-peach dark:text-blue-300 dark:hover:text-peach font-medium" href={`/tags/${tag}`}>
          {tag}
        </a>
      </p>

    ))}

  </div>

</BaseLayout>