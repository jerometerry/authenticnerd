---
import BaseLayout from '@layouts/BaseLayout.astro';
import BlogPost from '@components/BlogPost.astro';
import NerdGrid from '@components/NerdGrid.astro';

import { getCollection } from "astro:content";
const allPosts = await getCollection("blog");

const sortedPosts = allPosts.sort((a: any, b: any) => {
  return new Date(b.data.pubDate).valueOf() - new Date(a.data.pubDate).valueOf();
});

const pageTitle = "Authentic Nerd";
const description = "Living life as a professional, authentic, N.E.R.D. - Neurodivergent Empathetic Romantic Dramatic";
---

<BaseLayout pageTitle={pageTitle} description={description}>
  
  <section class="hero">

    <h1 class="text-5xl font-bold text-navy dark:text-white mb-2 leading-tight text-center">
      Authentic 
      <span class="text-terracotta dark:text-peach">Nerd</span>
    </h1>

    <p class="text-lg text-center text-gray-600 max-w-[45ch] mx-auto mb-8 text-balance dark:text-gray-400">
      Exploring the Intersection of Systems Thinking, Mental Health, and Software Engineering.
    </p>

    <NerdGrid />
    
  </section>

  <hr class="border-0 h-px bg-linear-to-r from-transparent via-gray-300 to-transparent my-12" />

  <section>

    <div class="mb-8">
      <h2 class="text-4xl mb-6 text-terracotta dark:text-peach">
        Latest Posts
      </h1>
    </div>

    <div class="flex flex-col w-full">
    
      {sortedPosts.map((post: any) => (

        <BlogPost 
          url={`/posts/${post.id}/`}
          title={post.data.title} 
          pubDate={post.data.pubDate} 
        />

      ))}
      
    </div>
  </section>

</BaseLayout>
