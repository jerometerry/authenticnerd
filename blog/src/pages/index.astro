---
import BaseLayout from "@layouts/BaseLayout.astro";
import BlogPost from "@components/BlogPost.astro";
import NerdGrid from "@components/NerdGrid.astro";

import { getCollection } from "astro:content";
const allPosts = await getCollection("blog");

const sortedPosts = allPosts.sort((a: any, b: any) => {
  return (
    new Date(b.data.pubDate).valueOf() - new Date(a.data.pubDate).valueOf()
  );
});

const pageTitle = "Authentic Nerd";
const description =
  "Living life as a professional, authentic, N.E.R.D. - Neurodivergent Empathetic Romantic Dramatic";
---

<BaseLayout pageTitle={pageTitle} description={description} ogType="website">
  <section class="hero">
    <h1
      class="text-navy mb-2 text-center text-5xl leading-tight font-bold dark:text-white"
    >
      Authentic
      <span class="text-terracotta dark:text-peach">Nerd</span>
    </h1>

    <p
      class="mx-auto mb-8 max-w-[45ch] text-center text-lg text-balance text-gray-600 dark:text-gray-400"
    >
      Exploring the Intersection of Systems Thinking, Mental Health, and
      Software Engineering.
    </p>

    <NerdGrid />
  </section>

  <hr
    class="my-12 h-px border-0 bg-linear-to-r from-transparent via-gray-300 to-transparent"
  />

  <section>
    <div class="mb-8">
      <h2 class="text-terracotta dark:text-peach mb-6 text-4xl">
        Latest Posts
      </h2>
    </div>

    <div class="flex w-full flex-col">
      {
        sortedPosts.map((post: any) => (
          <BlogPost
            url={`/posts/${post.id}/`}
            title={post.data.title}
            pubDate={post.data.pubDate}
          />
        ))
      }
    </div>
  </section>
</BaseLayout>
